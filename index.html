<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title>千与千寻</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400;500;700&display=swap');
        body {
            background-color: #FFF5E6;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }
        
        .version-info {
            position: fixed;
            left: 10px;
            bottom: 10px;
            font-size: 14px;
            color: #666;
        }

        .container {
            margin: 33px 66px 33px 66px; /*上 右 下 左*/
            padding: 20px;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            min-height: calc(100vh - 60px - 66px); /* 减去上下外边距总和 66px */
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .player-container {
            width: 900px;
            height: 600px;
            background-color: rgb(203, 230, 203); /* 后期删掉 */
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 24px;
            border-radius: 10px;
            position: relative; /* 添加相对定位 */
        }

        .music {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            position: relative; /* 添加相对定位 */
            height: 100%; /* 确保填充整个容器 */
            width: 100%; /* 确保填充整个容器 */
        }

        .title {
            font-weight: 400;
            font-size: 2em;
            color: #38a7ff;
            display: inline-flex;
            text-align: center;
            margin-bottom: 20px;
        }
        .player {
            position: relative;
            width: 600px;
            min-height: 50px;
            background: #fbfbfb;
            border: 2px solid #fff;
            border-radius: 80px;
            padding: 20px 30px;
            box-shadow: -10px -10px 15px #fff,
                        10px 10px 15px rgba(0, 0, 0, 0.1),
                        inset -5px -5px 15px #fff,
                        inset 5px 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 5px; /* 减少底部间距到5px */
            transform: translateY(153px); /* 播放器的位置高度 */
        }
        .btns {
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        .btns span {
            position: relative;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #777;
            box-shadow: inset 0 -5px 5px rgba(0,0,0,0.1),
                        0 5px 10px rgba(0,0,0,0.1),
                        0 10px 15px rgba(0,0,0,0.1);
            cursor: pointer;
        }
        .btns span:active {
            color: #ff669a;
            box-shadow: inset 0 -7px 5px rgba(0,0,0,0.025),
                        inset 0 5px 10px rgba(0,0,0,0.1);
        }
        .btns span:active,
        .btns span.active {
            color: #ff669a;
            box-shadow: inset 0 -7px 5px rgba(0, 0, 0, 0.025),
                inset 0 5px 10px rgba(0, 0, 0, 0.15);
        }
        .btns span.playPause {
            width: 60px;
            height: 60px;
        }

        .btns span ion-icon {
            font-size: 1.5em;
        }

        .btns span.playPause ion-icon {
            font-size: 2em;
        }

        /* 修改进度条容器样式 - 使用绝对定位靠近底部 */
        .progress-all {
            position: absolute;
            bottom: 0px; /* 距离底部40px */
            left: 50%;
            transform: translateX(-50%);
            width: 588px;
        }
        
        /* 新增进度条样式 */
        .progress-container {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 10px;
            margin-top: 20px;
            overflow: hidden;
            cursor: pointer;
        }
        
        .progress {
            height: 100%;
            background: #38a7ff;
            width: 0%;
            border-radius: 10px;
            transition: width 0.1s ease;
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            color: #777;
            font-size: 14px;
        }

    </style>
</head>
<body>
    <div class="container">
        <div class="player-container">
            <div class="music">
                <span>
                    <ion-icon name="help-circle-outline"></ion-icon>
                    <ion-icon name="megaphone-outline"></ion-icon>
                    en zh en,zh
                    <ion-icon name="color-wand-outline"></ion-icon>
                    分析图表 原文, 成分
                </span>
                <h2 class="title"> Music Name</h2>
                <div class="player">
                    <audio src=""></audio>
                    <div class="btns">
                        <!-- <ion-icon name="musical-notes-outline"></ion-icon> -->
                        <!-- <ion-icon name="play-back-circle-outline"></ion-icon> -->
                        <!-- <ion-icon name="play-forward-circle-outline"></ion-icon> -->
                        <span>
                            <ion-icon name="sync-outline"></ion-icon>
                            <ion-icon name="remove-outline"></ion-icon>
                            <ion-icon name="reorder-three-outline"></ion-icon>
                        </span>

                        <span class="prev">
                            <ion-icon name="play-back-outline"></ion-icon>
                        </span>

                        <span class="playPause">
                            <ion-icon name="play-outline"></ion-icon>
                        </span>
                        
                        <span class="next">
                            <ion-icon name="play-forward-outline"></ion-icon>
                        </span>

                        <span>
                            <ion-icon name="list-outline"></ion-icon>
                        </span>
                    </div>
                </div>
                <!-- 进度条现在使用绝对定位靠近底部 -->
                <div class="progress-all">
                    <!-- 新增进度条 -->
                    <div class="progress-container">
                        <div class="progress"></div>
                    </div>
                    <div class="time-display">
                        <span class="current-time">0:00</span>
                        <span class="duration">0:00</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="version-info">v.0.0.6</div>
    <!-- 更新版本号 -->
</body>
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
<script>
    const title = document.querySelector('.title');
    const prev = document.querySelector('.prev');
    const playPause = document.querySelector('.playPause');
    const next = document.querySelector('.next');
    const audio = document.querySelector('audio');
    const progressContainer = document.querySelector('.progress-container');
    const progress = document.querySelector('.progress');
    const currentTimeEl = document.querySelector('.current-time');
    const durationEl = document.querySelector('.duration');
    //first,we will create song list
    const songList = [
        {
            path: "./music/1.mp3",
            songName: "name 1",
        },
        {
            path: "./music/2.mp3",
            songName: "name 2",
        },
        {
            path: "./music/3.mp3",
            songName: "name 3",
        },
        {
            path: "./music/4.mp3",
            songName: "name 4",
        },
        {
            path: "./music/5.mp3",
            songName: "name 5",
        }
    ];
    let song_Playing = false;
    let currentSongIndex = 0;

    // 加载歌曲
    function loadSong(song) {
        title.textContent = song.songName;
        audio.src = song.path;

        // 重置进度条
        progress.style.width = '0%';
        currentTimeEl.textContent = '0:00';

        // 当元数据加载完成后更新总时长
        audio.addEventListener('loadedmetadata', function() {
            const duration = audio.duration;
            const minutes = Math.floor(duration / 60);
            const seconds = Math.floor(duration % 60);
            durationEl.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        });
    }

    //play song
    function playSong(){
        song_Playing = true;
        audio.play();
        playPause.classList.add('active');
        //change icon
        playPause.innerHTML = '<ion-icon name="pause-outline"></ion-icon>';
    }

    //pause song
    function pauseSong(){
        song_Playing = false;
        audio.pause();
        playPause.classList.remove('active');
        //change icon
        playPause.innerHTML = '<ion-icon name="play-outline"></ion-icon>';
    }

    //play or pause song on click
    playPause.addEventListener("click", () => (song_Playing ? pauseSong() : playSong()));

    //next song

    function prevSong(){
        currentSongIndex--;
        if (currentSongIndex < 0 ){
            currentSongIndex = songList.length - 1;
        }
        loadSong(songList[currentSongIndex]);
        if (song_Playing) playSong();
    }
    prev.addEventListener("click", prevSong);

    function nextSong(){
        currentSongIndex++;
        if (currentSongIndex > songList.length - 1){
            currentSongIndex = 0;
        }
        loadSong(songList[currentSongIndex]);
        if (song_Playing) playSong();
    }
    next.addEventListener("click", nextSong);

    // 更新进度条
    function updateProgress(e) {
        const { duration, currentTime } = e.srcElement;
        if (duration) {
            const progressPercent = (currentTime / duration) * 100;
            progress.style.width = `${progressPercent}%`;
            
            // 更新当前时间显示
            const currentMinutes = Math.floor(currentTime / 60);
            const currentSeconds = Math.floor(currentTime % 60);
            currentTimeEl.textContent = `${currentMinutes}:${currentSeconds < 10 ? '0' : ''}${currentSeconds}`;
        }
    }
    
    // 设置进度条
    function setProgress(e) {
        const width = this.clientWidth;
        const clickX = e.offsetX;
        const duration = audio.duration;
        audio.currentTime = (clickX / width) * duration;
    }

    // 事件监听
    audio.addEventListener('timeupdate', updateProgress);
    audio.addEventListener('ended', nextSong); // 歌曲结束时自动播放下一首
    progressContainer.addEventListener('click', setProgress);

    // 初始化加载第一首歌
    loadSong(songList[currentSongIndex]);
</script>
</html>